<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Rustique_un-char-ted</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<p>This one was very existing exercise, and I'm always surprise how good
Rust language is. Even with the very specifics on memory safety, with
Rust, you kind of feel at home, since it has pretty much gathered all
the not so recent as well as recent coding style which then gives you
the joy to always be able to produce what every you want.</p>
<p>With, in my opinion, the excellent documentation of the standard
library, I manage to play with char type and learn on uncharted
territories.</p>
<p>In this research journey, my goal this time is to understand how I
can read correctly characters form a text file and also understand how
to deal with UTF8 and non UTF8 characters.</p>
<p>As I touch on it a bit on my last article, with Rust by default it is
UTF8 compliant which is encoded on 1 to 4bytes, where the ASCII are
encoded on 1 bytes.</p>
<p>Play with char</p>
<p>So the game was to simulate how head is reading an UTF8
characters</p>
<p>For instance when requesting the 1bytes of the character Ö </p>
<p>$ echo "Öne line, four words." | head -c 1</p>
<p>it will be printed out like this with head from coreutils �</p>
<p>The reason is that Ö is encoded on 2 bytes so to have the full
character with head you will need to request 2 bytes</p>
<p>$ echo "Öne line, four words." | head -c 2</p>
<p>$ Ö</p>
<p>The endless story of strings</p>
<p>The second topic which was very interesting to investigate was the
Strings. </p>
<p>I have tested two way to do store the character read.</p>
<p>In the first case I'm storing all of them in a vector and then
"convert" it to a String or String slice depending on the context
with,</p>
<p>String::from_utf8_lossy()</p>
<p>This is how it looks like:</p>
<p><img src="./Pictures/100000000000023B0000018A7249AECCB20300A1.png"
style="width:5.948in;height:4.1043in" /></p>
<p>using vector type to store bytes</p>
<p>This is the expected behavior, I'm looking for.</p>
<p>In the second case, I have tested to store all the characters
directly in a String and the output result is very different as you can
see in the header screenshot.</p>
<p>This is what the function looks like:</p>
<p><img src="./Pictures/1000000000000244000001E46D8CFE81E54E49E2.png"
style="width:6.0417in;height:5.0417in" /></p>
<p>Using String type to store bytes</p>
<p>Strings has it own world in programming and I'm very curious to learn
more how rust is managing strings.</p>
<p>Next time, I will try to put all of this together to have my own
simplified version of head :D</p>
<p>楽しみ！ｗｗｗ</p>
<p>Source code: https://github.com/Vagrantin/lirelechar</p>
<p>Books : </p>
<p><a
href="https://www.oreilly.com/library/view/command-line-rust/9781098109424/">Command
line Rust</a></p>
<p><a
href="https://nostarch.com/rust-programming-language-2nd-edition">The
rust programming language</a></p>
</body>
</html>
